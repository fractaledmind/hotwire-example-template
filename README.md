# Hotwire: Server-rendering alerts for client-side actions

[![Deploy to Heroku](https://www.herokucdn.com/deploy/button.png)][heroku-deploy-app]

[heroku-deploy-app]: https://heroku.com/deploy?template=https://github.com/thoughtbot/hotwire-example-template/tree/hotwire-example-button-alert-template

[It all starts with HTML][].

[Stimulus][] controllers [synchronize their state with the document's
HTML][stimulus-state] through [attribute][]-backed [Values][] and
[element][]-backed [Targets][].

* declarative, pre-populated state
* co-locates decisions about structure, content, styles, and element references
  in the same server-generated template
* client responsibilities are constrained, only include appending to and
  removing from document

We'll explore its potential by re-creating a portion of the [_Building Something
Real_][] section of the [Stimulus Handbook][].

The advent of the [`<template>`][template] element poses an opportunity to
server-render HTML content.

[It All Starts With HTML]: https://stimulus.hotwired.dev/handbook/hello-stimulus#it-all-starts-with-html
[Stimulus]: https://stimulus.hotwired.dev/
[stimulus-state]: https://stimulus.hotwired.dev/handbook/managing-state
[attribute]: https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes
[element]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element
[Values]: https://stimulus.hotwired.dev/handbook/managing-state#using-values
[Targets]: https://stimulus.hotwired.dev/reference/targets
[template]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template
[_Building Something Real_]: https://stimulus.hotwired.dev/handbook/building-something-real
[Stimulus Handbook]: https://stimulus.hotwired.dev/handbook/introduction

The code samples shared in this article omit the majority of the application's
setup. The initial code was generated by executing `rails new`. The rest of the
[source code][] from this article (including a [suite of tests][]) can be found
on GitHub, and is best read either [commit-by-commit][], or as a [unified
diff][].

[source code]: https://github.com/thoughtbot/hotwire-example-template/tree/hotwire-example-button-alert-template
[suite of tests]: https://github.com/thoughtbot/hotwire-example-template/tree/hotwire-example-button-alert-template
[commit-by-commit]: https://github.com/thoughtbot/hotwire-example-template/commits/hotwire-example-button-alert-template
[unified diff]: https://github.com/thoughtbot/hotwire-example-template/compare/hotwire-example-button-alert-template

## Our starting point

The `app/views/invitation_codes/show.html.erb` template renders two `<fieldset>`
elements: one to copy the invitation code out of, and one to paste the
invitation code into:

```erb
<%# app/views/invitation_codes/show.html.erb %>

<fieldset>
  <legend>Copy</legend>

  <label>
    Invitation code

    <input value="<%= @invitation_code %>" readonly>
  </label>

  <button type="button" value="<%= @invitation_code %>"
          data-controller="clipboard"
          data-action="click->clipboard#copy">
    Copy to clipboard
  </button>
</fieldset>

<fieldset>
  <legend>Paste</legend>

  <label>
    Invitation code
    <input>
  </label>
</fieldset>
```

The second `<fieldset>` nests an empty `<input>` element for the sole purpose of
demonstrating the user's ability to paste the copied code value from their
[Clipboard][].

The first `<fieldset>` pairs an `<input>` element with a `<button>` element. The
`<input>` element is pre-populated with the invitation code and marked as
[readonly][]. The `<button>` is marked as [type="button"][], and [routes `click`
events][stimulus-actions] to the `clipboard` controller:

[type="button"]: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#attr-type
[readonly]: https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/readonly
[Clipboard]: https://developer.mozilla.org/en-US/docs/Web/API/Clipboard
[stimulus-actions]: https://stimulus.hotwired.dev/reference/actions

```javascript
// app/javascript/controllers/clipboard_controller.js

import { Controller } from "@hotwired/stimulus"

export default class extends Controller {
  copy({ target: { value } }) {
    navigator.clipboard.writeText(value)
  }
}
```

Finally, our Rails controller mimics a more useful controller by treating the
value in the `/invitation_codes/:id` path's `:id` dynamic segment as the
invitation code:

```ruby
# app/controllers/invitation_codes_controller.rb

class InvitationCodesController < ApplicationController
  def show
    @invitation_code = params[:id]
  end
end
```

For example, a requests to <http://localhost:3000/invitation_codes/abc123> would
result in a response with `abc123` as the invitation code.

https://user-images.githubusercontent.com/2575027/154692773-cc91ff39-63e3-4e4e-857d-0657ea39d56e.mov
